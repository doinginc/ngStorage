/*! ngStorage 0.3.0 | Copyright (c) 2014 Gias Kay Lee | MIT License */!function(){"use strict";function a(a){return["$rootScope","$window","$log","$timeout",function(b,c,d,e){var f,g,h,i={$default:function(a){for(var b in a)angular.isDefined(i[b])||(i[b]=a[b]);return i},$reset:function(a){for(var b in i)"$"===b[0]||delete i[b];return i.$default(a)},$save:function(){if(e.cancel(h),!angular.equals(i,g)){angular.forEach(i,function(a,b){angular.isDefined(a)&&"$"!==b[0]&&f.setItem("ngStorage-"+b,angular.toJson(a)),delete g[b]});for(var a in g)f.removeItem("ngStorage-"+a);g=angular.copy(i)}}};try{f=c[a],f.length}catch(j){d.warn("This browser does not support Web Storage!");var k,l={};f={setItem:function(a,b){return l[a]=String(b)},getItem:function(a){return l.hasOwnProperty(a)?l[a]:k},removeItem:function(a){return delete l[a]},clear:function(){return l={}},length:0}}for(var m,n=0,o=f.length;o>n;n++)(m=f.key(n))&&"ngStorage-"===m.slice(0,10)&&(i[m.slice(10)]=angular.fromJson(f.getItem(m)));return g=angular.copy(i),b.$watch(function(){h||(h=e(function(){i.$save()},100))}),"localStorage"===a&&c.addEventListener&&c.addEventListener("storage",function(a){"ngStorage-"===a.key.slice(0,10)&&(a.newValue?i[a.key.slice(10)]=angular.fromJson(a.newValue):delete i[a.key.slice(10)],g=angular.copy(i),b.$apply())}),i}]}angular.module("ngStorage",[]).factory("$localStorage",a("localStorage")).factory("$sessionStorage",a("sessionStorage"))}();